{"version":3,"sources":["webpack:///./src/templates/directory_archive-template.js"],"names":["DirectoryArchiveTemplate","data","pageContext","directory","numberOfPages","humanPageNumber","crumbs","breadcrumb","title","slice","map","v","crumbLabel","join","className","allMdx","nodes","node","excerptify","key","id","display","justifyContent","m","count","page","onChange","_e","p","path","directoryArchivePath","navigate","handleChange"],"mappings":"8FAAA,6JA6Ce,SAASA,EAAT,GAA0D,IAAtBC,EAAqB,EAArBA,KAAMC,EAAe,EAAfA,YAC/CC,EAA8CD,EAA9CC,UAAWC,EAAmCF,EAAnCE,cAAeC,EAAoBH,EAApBG,gBACZC,EAAaJ,EAA3BK,WAAcD,OAGhBE,EAAK,cADGF,EAAOG,MAAM,GAAGC,KAAI,SAAAC,GAAC,OAAIA,EAAEC,cAAYC,KAAK,KAG1D,OACE,YAAC,IAAD,CAAQL,MAAOA,GACb,YAAC,aAAD,CAAYF,OAAQA,IACpB,kBAAIQ,UAAU,aAAaN,GAEzBP,EAAKc,OAAOC,MAAMN,KAAI,SAAAO,GAAI,OACxB,YAAC,IAAD,CAAMC,YAAY,EAAMD,KAAMA,EAAME,IAAKF,EAAKG,QAIlD,YAAC,IAAD,CAAKC,QAAQ,OAAOC,eAAe,SAASC,EAAG,GAC7C,YAAC,IAAD,CAAYC,MAAOpB,EAAeqB,KAAMpB,EAAiBqB,SAAU,SAACC,EAAIC,IAvB3D,SAACzB,EAAWyB,GAC/B,IAAMC,EAAOC,+BAAqB3B,GAClC4B,mBAAgB,IAANH,EAAWC,EAAUA,EAAtB,IAA8BD,GAqB+CI,CAAa7B,EAAWyB","file":"component---src-templates-directory-archive-template-js-31e3d96344b58a7fb99a.js","sourcesContent":["import React from \"react\"\nimport { graphql, navigate } from \"gatsby\"\nimport { Breadcrumb } from 'gatsby-plugin-breadcrumb'\nimport Box from '@material-ui/core/Box'\nimport { Pagination } from '@material-ui/lab'\n\nimport { Post } from \"../components/post.js\"\nimport Layout from \"../components/layout.js\"\nimport { directoryArchivePath } from '../utils/archive_path'\n\nexport const query = graphql`\n    query($regex: String!, $pruneLength: Int!=100, $skip: Int!, $limit: Int!){        \n      allMdx(sort:  {fields: frontmatter___date, order: DESC},\n        filter: {fields: {directory: {regex: $regex}}},\n        skip: $skip, limit: $limit\n         ) {\n        nodes { \n          id\n          excerpt(truncate: true, pruneLength: $pruneLength)\n          \n          tableOfContents\n          frontmatter {\n            date(formatString: \"YYYY-MM-DD\"), title, description\n            cover {\n              childImageSharp {\n                fluid(maxWidth: 800) {\n                  ...GatsbyImageSharpFluid\n                }\n              }\n            }\n          }     \n          fields { \n            slug, directory\n          }   \n          \n        }\n      }\n    }\n  `\n\nconst handleChange = (directory, p) => {\n  const path = directoryArchivePath(directory)\n  navigate((p === 1) ? path : `${path}/${p}`)\n}\n\nexport default function DirectoryArchiveTemplate({ data, pageContext }) {\n  const { directory, numberOfPages, humanPageNumber } = pageContext\n  const { breadcrumb: { crumbs } } = pageContext\n  //const current_directory = directory.split('/').slice(-1)\n  const label = crumbs.slice(1).map(v => v.crumbLabel).join('/')\n  const title = `DIRECTORY: ${label}`\n\n  return (\n    <Layout title={title}>\n      <Breadcrumb crumbs={crumbs} />\n      <h1 className=\"pageTitle\">{title}</h1>\n      {\n        data.allMdx.nodes.map(node => (\n          <Post excerptify={true} node={node} key={node.id} />\n        ))\n      }\n\n      <Box display=\"flex\" justifyContent=\"center\" m={3}>\n        <Pagination count={numberOfPages} page={humanPageNumber} onChange={(_e, p) => { handleChange(directory, p) }} />\n      </Box>\n    </Layout>\n  )\n}\n"],"sourceRoot":""}